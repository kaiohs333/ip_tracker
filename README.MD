# Projeto Registrador de IP üïµÔ∏è‚Äç‚ôÇÔ∏è

Aplica√ß√£o de desktop para gerenciamento de IPs, implementando extra√ß√£o de dados via OCR (Tesseract) e persist√™ncia em banco de dados PostgreSQL.

**CURSO:** ENGENHARIA DE SOFTWARE
**PER√çODO:** 5¬∫ Per√≠odo
**DISCIPLINA:** [SUA DISCIPLINA AQUI (ex: DESENVOLVIMENTO DE SOFTWARE)]
**PROFESSOR:** [NOME DO SEU PROFESSOR AQUI]

---

## üéØ Objetivo do Projeto

Desenvolver uma aplica√ß√£o desktop com interface gr√°fica (GUI) que permita a um usu√°rio registrar e consultar endere√ßos IP. O objetivo principal √© agilizar o fluxo de trabalho do usu√°rio, permitindo que o sistema extraia automaticamente um IP de uma captura de tela (print screen) colada diretamente na aplica√ß√£o.

---

## ‚öôÔ∏è L√≥gica da Aplica√ß√£o Implementada

A l√≥gica central do sistema √© dividida em dois fluxos principais: a extra√ß√£o de dados por OCR e o registro de dados com fallback.

### 1. Fluxo de Extra√ß√£o de IP via OCR

O sistema captura o evento `Cmd+V` (colar) em toda a aplica√ß√£o. A l√≥gica de tratamento segue estes passos:

* **1. Tentativa de Colar Texto:** O sistema primeiro verifica se o conte√∫do da √°rea de transfer√™ncia √© um texto.
    * **Se sim:** O texto √© analisado com a express√£o regular (Regex) `r'\b(?:\d{1,3}\.){3}\d{1,3}\b'`.
    * **Se um IP for encontrado:** O campo de entrada √© preenchido com o IP e o fluxo termina.
* **2. Tentativa de Colar Imagem:** Se o conte√∫do n√£o for texto, o sistema tenta l√™-lo como uma imagem (`ImageGrab.grabclipboard()`).
    * **Se for uma imagem:** A imagem √© enviada para o motor Tesseract (`pytesseract.image_to_string()`).
    * **Se o Tesseract extrair texto:** O texto resultante √© analisado pela *mesma* express√£o regular (Regex) para encontrar um IP.
    * **Se um IP for encontrado:** O campo de entrada √© preenchido.

### 2. Fluxo de Registro com Fallback de API

Ao clicar em "Registrar", o sistema enriquece os dados antes de salvar:

* **1. Busca na API:** O sistema consulta a API `ip-api.com` para obter o pa√≠s associado ao IP.
* **2. Verifica√ß√£o (Fallback):** O sistema verifica se a API retornou um pa√≠s.
    * **Se n√£o (ex: IP privado como 192.168.1.1):** Uma nova caixa de di√°logo (`PasteEnabledInputDialog`) √© aberta, solicitando que o usu√°rio digite o pa√≠s manualmente.
    * **Se o usu√°rio cancelar:** O registro √© interrompido.
* **3. Confirma√ß√£o e Registro:** Com todos os dados (IP, C√≥digo Mobile, Pa√≠s, Tipo), uma confirma√ß√£o √© exibida. Se o usu√°rio aceitar, os dados s√£o enviados ao PostgreSQL (`register_ip_in_db`).

---

## üöÄ Como Executar o Projeto

Para executar o projeto localmente, s√£o necess√°rios pr√©-requisitos de sistema e a configura√ß√£o do banco de dados.

### 1. Pr√©-requisitos do Sistema

* **PostgreSQL:** O servidor de banco de dados precisa estar instalado e rodando.
* **Tesseract OCR:** O motor de OCR. No Mac, a instala√ß√£o √© via Homebrew:
    ```bash
    brew install tesseract
    ```

### 2. Configura√ß√£o do Banco de Dados

1.  Crie um banco de dados no PostgreSQL (ex: via `pgAdmin`). O nome padr√£o esperado √©:
    `ip_tracker`
2.  Execute o script SQL abaixo para criar a tabela:
    ```sql
    CREATE TABLE registered_ips (
        id SERIAL PRIMARY KEY,
        ip_address VARCHAR(45) NOT NULL UNIQUE,
        mobile_code VARCHAR(10),
        country VARCHAR(100),
        registration_date TIMESTAMPTZ DEFAULT NOW(),
        record_type VARCHAR(20) NOT NULL DEFAULT 'Publica√ß√£o'
    );
    ```

### 3. Instala√ß√£o e Execu√ß√£o

1.  Clone o reposit√≥rio e navegue at√© a pasta:
    ```bash
    git clone [https://github.com/SEU_USUARIO/SEU_REPOSITORIO.git](https://github.com/SEU_USUARIO/SEU_REPOSITORIO.git)
    cd nome-do-projeto
    ```
2.  Crie o arquivo `.env` na raiz do projeto para suas credenciais do banco:
    ```ini
    DB_USER="postgres"
    DB_PASSWORD="sua_senha_secreta_aqui"
    DB_HOST="localhost"
    DB_PORT="5432"
    DB_NAME="ip_tracker"
    ```
3.  Crie e ative um ambiente virtual:
    ```bash
    python3 -m venv .venv
    source .venv/bin/activate
    ```
4.  Instale as depend√™ncias:
    ```bash
    pip install -r requirements.txt
    ```
5.  Execute o script `main.py` (o lan√ßador):
    ```bash
    python main.py
    ```
------------------------------------------

## üìä Diagrama de Fluxo - Registro de IP

Diagrama visual (gerado com PlantUML) demonstrando o fluxo de l√≥gica ao clicar no bot√£o "Registrar IP".

![Diagrama de Fluxo - Registro de IP](./diagram/ipTracker.png)